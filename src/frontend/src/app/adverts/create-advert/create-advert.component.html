<form [formGroup]="form" class="flex justify-content-center registerMenu" (ngSubmit)="createAdvert()">
  <div class="surface-card p-4 shadow-2 border-round w-full lg:w-6">
    <h2 class="title">Novo Produto</h2>
    <div>
      <div>
        <label for="title" class="block text-900 font-medium mb-2">Título</label>
        <input id="title" type="text" pInputText class="w-full mb-2" formControlName="title" [ngClass]="{'ng-dirty': title!.invalid && title!.touched}">
        <div *ngIf="title!.invalid && (title!.dirty || title!.touched)">
          <p *ngIf="title!.errors?.['required']" class="p-error mt-0">Título é obrigatório</p>
        </div>
      </div>

      <div>
        <label for="description" class="block text-900 font-medium mb-2 mt-3">Descrição</label>
        <textarea id="description" class="w-full" formControlName="description" [ngClass]="{'ng-dirty': description!.invalid && description!.touched}" pInputTextarea></textarea>
        <div *ngIf="description!.invalid && (description!.dirty || description!.touched)">
          <p *ngIf="description!.errors?.['required']" class="p-error mt-0">Descrição obrigatória</p>
        </div>
      </div>

      <div class="formgrid grid mt-3">
        <div class="field col-7">
          <label for="email" class="block text-900 font-medium mb-2">Email</label>
          <input id="email" type="text" pInputText class="w-full mb-2" formControlName="email" [ngClass]="{'ng-dirty': email!.invalid && email!.touched}">
          <div *ngIf="email!.invalid && (email!.dirty || email!.touched)">
            <p *ngIf="email!.errors?.['required']" class="p-error mt-0">Email é obrigatório</p>
            <p *ngIf="email!.errors?.['email']" class="p-error mt-0">Email inválido</p>
          </div>
        </div>

        <div class="field col-5">
          <label for="phoneNumber" class="block text-900 font-medium mb-2">Telemovel</label>
          <input id="phoneNumber" type="text" pInputText class="w-full mb-2" formControlName="phoneNumber" [ngClass]="{'ng-dirty': phoneNumber!.invalid && phoneNumber!.touched}">
          <div *ngIf="phoneNumber!.invalid && (phoneNumber!.dirty || phoneNumber!.touched)">
            <p *ngIf="phoneNumber!.errors?.['required']" class="p-error mt-0">Nº de telemovel obrigatório</p>
            <p *ngIf="phoneNumber!.errors?.['pattern']" class="p-error mt-0">Nº de telemovel só pode conter números</p>
          </div>
        </div>
      </div>

      <div class="formgrid grid mt-3">
        <div class="field col">
          <label class="block text-900 font-medium mb-2">Categoria</label>
          <p-dropdown [options]="categories" optionLabel="categoryName" placeholder="Selecione a categoria" formControlName="category" [ngClass]="{'ng-dirty': category!.invalid && category!.touched}"></p-dropdown>
          <div *ngIf="category!.invalid && (category!.dirty || category!.touched)">
            <p *ngIf="category!.errors?.['required']" class="p-error mt-0">Escolha uma categoria</p>
          </div>
        </div>
        <div class="field col">
          <label class="block text-900 font-medium mb-2">Género</label>
          <p-dropdown [options]="genders" optionLabel="name" placeholder="Selecione o género" formControlName="gender" [ngClass]="{'ng-dirty': gender!.invalid && gender!.touched}"></p-dropdown>
          <div *ngIf="gender!.invalid && (gender!.dirty || gender!.touched)">
            <p *ngIf="gender!.errors?.['required']" class="p-error mt-0">Escolha um género</p>
          </div>
        </div>
      </div>

      <div>
        <label  class="block text-900 font-medium mb-2">Localização</label>
        <p-gmap [options]="options" [overlays]="overlays" (onMapClick)="handleMapClick($event)" [style]="{'width':'100%','height':'320px'}" ></p-gmap>
      </div>

      <div class="img">
        <label  class="block text-900 font-medium mb-2">Imagens</label>
        <div class="image-upload col-2 flex align-items-center justify-content-center">
          <label for="upload-photo-input" class="upload-photo-img">
            <img src="./assets/SD-default-image.png"  class="w-7rem cursor-pointer flex align-items-center">
          </label>
          <input type="file" id="upload-photo-input" (change)="upload($event)">
        </div>
      </div>

      <div>
        <label for="price" class="block text-900 font-medium mb-2">Preço</label>
        <input id="price" type="text" pInputText class="w-full mb-2" formControlName="price" [ngClass]="{'ng-dirty': price!.invalid && price!.touched}">
        <div *ngIf="price!.invalid && (price!.dirty || price!.touched)">
          <p *ngIf="price!.errors?.['required']" class="p-error mt-0">Preço obrigatório</p>
          <p *ngIf="price!.errors?.['pattern']" class="p-error mt-0">Preço só pode conter números</p>
        </div>
      </div>

      <button [disabled]="!form.valid" type="submit" pButton pRipple label="Criar" icon="pi pi-plus" class="mt-4 w-full"></button>
    </div>
  </div>
</form>


